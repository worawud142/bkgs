<!doctype html>
<html lang="th">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Äì ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏±‡∏ß‡∏Å‡πà‡∏≤‡∏¢</title>
  <meta name="description" content="‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏±‡∏ß‡∏Å‡πà‡∏≤‡∏¢" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['IBM Plex Sans Thai', 'IBM Plex Sans', 'ui-sans-serif', 'system-ui'] },
          colors: {
            brand: { 50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a' },
            accent: { 50: '#f0f9ff', 100: '#e0f2fe', 200: '#bae6fd', 300: '#7dd3fc', 400: '#38bdf8', 500: '#0ea5e9' }
          },
          boxShadow: { soft: '0 10px 30px rgba(0,0,0,0.08)' }
        }
      }
    }
  </script>
  <style>
    html { scroll-behavior: smooth }
    ::-webkit-scrollbar { width: 10px; height: 10px }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 999px }
    ::-webkit-scrollbar-track { background: #f1f5f9 }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/config.js"></script>
</head>

<body class="font-sans text-slate-800 bg-slate-50">
  <!-- Header -->
  <header class="bg-white/90 backdrop-blur sticky top-0 z-50 shadow">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" class="flex items-center gap-3">
          <img src="img/logo.jpg" class="h-9 w-9" alt="‡∏ï‡∏£‡∏≤‡πÄ‡∏™‡∏°‡∏≤" />
          <div class="leading-tight">
            <div class="text-base font-semibold text-brand-800">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏±‡∏ß‡∏Å‡πà‡∏≤‡∏¢</div>
            <div class="text-[11px] text-slate-500">Ban Khua Kai School</div>
          </div>
        </a>
        <nav class="hidden md:flex items-center gap-6 text-[15px]">
          <a href="index.html#about" class="hover:text-brand-700">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</a>
          <a href="index.html#news" class="hover:text-brand-700">‡∏Ç‡πà‡∏≤‡∏ß/‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</a>
          <a href="index.html#events" class="text-brand-700 font-semibold">‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>
          <a href="gallery.html" class="hover:text-brand-700">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ</a>
          <a href="staff.html" class="hover:text-brand-700">‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</a>
          <a href="awards.html" class="hover:text-brand-700">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
          <a href="index.html#contact" class="hover:text-brand-700">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</a>
          <a href="index.html#donate"
            class="inline-flex items-center gap-1.5 bg-brand-600 hover:bg-brand-700 text-white px-3 py-1.5 rounded-full shadow-soft">‡∏£‡πà‡∏ß‡∏°‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô</a>
        </nav>
        <button id="btnMenu" class="md:hidden p-2 rounded-lg hover:bg-slate-100">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
      <div id="mobileMenu" class="hidden md:hidden pb-3">
        <div class="px-4 py-3 grid gap-2 text-[15px]">
          <a href="index.html#about" class="py-2 hover:text-brand-700">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</a>
          <a href="index.html#news" class="py-2 hover:text-brand-700">‡∏Ç‡πà‡∏≤‡∏ß/‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</a>
          <a href="index.html#events" class="py-2 text-brand-700 font-semibold">‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>
          <a href="gallery.html" class="py-2 hover:text-brand-700">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ</a>
          <a href="staff.html" class="py-2 hover:text-brand-700">‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</a>
          <a href="awards.html" class="py-2 hover:text-brand-700">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
          <a href="index.html#contact" class="py-2 hover:text-brand-700">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Page Header -->
  <section class="bg-gradient-to-r from-brand-600 to-brand-800 text-white py-12">
    <div class="max-w-7xl mx-auto px-4">
      <a href="index.html" class="text-sm text-white/80 hover:text-white">&larr; ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      <h1 class="mt-3 text-3xl md:text-4xl font-bold">üìÖ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
      <p class="mt-2 text-white/80">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏±‡∏ß‡∏Å‡πà‡∏≤‡∏¢</p>
    </div>
  </section>

  <!-- Events List -->
  <main class="max-w-7xl mx-auto px-4 py-10">
    <div id="eventCount" class="mb-6 text-sm text-slate-500"></div>

    <div id="eventGrid" class="grid md:grid-cols-2 gap-4"></div>

    <div id="loading" class="text-center py-10 text-slate-400">
      <svg class="animate-spin h-8 w-8 mx-auto text-brand-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
      </svg>
      <p class="mt-2">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô...</p>
    </div>

    <div id="emptyState" class="hidden text-center py-16">
      <div class="text-5xl mb-4">üì≠</div>
      <p class="text-slate-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-slate-900 text-white py-8">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <p class="text-sm text-white/60">¬© <span id="year"></span> ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏±‡∏ß‡∏Å‡πà‡∏≤‡∏¢ ‚Äì Ban Khua Kai School</p>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile menu
    document.getElementById('btnMenu')?.addEventListener('click', () => {
      document.getElementById('mobileMenu').classList.toggle('hidden');
    });

    const fallbackEvents = [
      { day: '13', month: '‡∏Å.‡∏¢. 68', title: '‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á ‡∏†‡∏≤‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà 1', place: '‡∏´‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‚Ä¢ 09:00‚Äì12:00 ‡∏ô.' },
      { day: '20', month: '‡∏Å.‡∏¢. 68', title: '‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏Å‡∏µ‡∏¨‡∏≤ E-Sport ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô', place: '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡πÄ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå ‚Ä¢ 13:00‚Äì16:00 ‡∏ô.' },
      { day: '28', month: '‡∏Å.‡∏¢. 68', title: '‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', place: '‡∏•‡∏≤‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‚Ä¢ ‡∏ï‡∏•‡∏≠‡∏î‡∏ß‡∏±‡∏ô' },
      { day: '05', month: '‡∏ï.‡∏Ñ. 68', title: '‡∏≠‡∏ö‡∏£‡∏°‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡∏¥‡πâ‡∏á', place: '‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå ‚Ä¢ 09:00‚Äì15:30 ‡∏ô.' },
    ];

    function renderEvents(list) {
      const wrap = document.getElementById('eventGrid');
      const countEl = document.getElementById('eventCount');
      const emptyEl = document.getElementById('emptyState');
      wrap.innerHTML = '';

      countEl.textContent = `‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${list.length} ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°`;

      if (list.length === 0) {
        emptyEl.classList.remove('hidden');
        return;
      }
      emptyEl.classList.add('hidden');

      list.forEach(e => {
        const el = document.createElement('div');
        el.className = 'flex items-start gap-4 p-5 bg-white rounded-2xl border shadow-sm hover:shadow-soft transition';
        el.innerHTML = `
          <div class="flex-shrink-0 w-16 h-16 bg-brand-50 rounded-xl flex flex-col items-center justify-center border border-brand-100">
            <div class="text-xl font-bold text-brand-700 leading-none">${e.d || e.day}</div>
            <div class="text-[11px] text-slate-500 mt-0.5">${e.m || e.month}</div>
          </div>
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-slate-800 text-base">${e.title}</h3>
            <p class="mt-1 text-sm text-slate-500 flex items-center gap-1">
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              ${e.place || ''}
            </p>
          </div>`;
        wrap.appendChild(el);
      });
    }

    // Load data
    (async () => {
      try {
        const { data: eventsList, error: eventsError } = await supabase
          .from('events')
          .select('*')
          .order('created_at', { ascending: true });

        if (eventsError) throw eventsError;

        if (eventsList && eventsList.length > 0) {
          renderEvents(eventsList);
        } else {
          renderEvents(fallbackEvents);
        }
      } catch (e) {
        console.warn('Events Error (using fallback):', e);
        renderEvents(fallbackEvents);
      }

      document.getElementById('loading').classList.add('hidden');
    })();
  </script>
</body>

</html>
